var $d4c2d15876271371a57d18fa8c42edb8$exports = {};
$parcel$require("d4c2d15876271371a57d18fa8c42edb8", "tslib");
$parcel$require("d4c2d15876271371a57d18fa8c42edb8", "classnames");
$parcel$require("d4c2d15876271371a57d18fa8c42edb8", "react");
$parcel$require("d4c2d15876271371a57d18fa8c42edb8", "../../common/boundary");
$parcel$require("d4c2d15876271371a57d18fa8c42edb8", "../../common/classes");
$parcel$require("d4c2d15876271371a57d18fa8c42edb8", "../../common/errors");
$parcel$require("d4c2d15876271371a57d18fa8c42edb8", "../../common/position");
$parcel$require("d4c2d15876271371a57d18fa8c42edb8", "../../common/props");
$parcel$require("d4c2d15876271371a57d18fa8c42edb8", "../../common/utils");
$parcel$require("d4c2d15876271371a57d18fa8c42edb8", "../menu/menu");
$parcel$require("d4c2d15876271371a57d18fa8c42edb8", "../menu/menuItem");
$parcel$require("d4c2d15876271371a57d18fa8c42edb8", "../popover/popover");

/** @deprecated use `<OverflowList>` for automatic overflow based on available space. */
var $d4c2d15876271371a57d18fa8c42edb8$export$CollapsibleList =
/** @class */
function (_super) {
  $d4c2d15876271371a57d18fa8c42edb8$import$tslib_1.__extends(CollapsibleList, _super);

  function CollapsibleList() {
    return _super !== null && _super.apply(this, arguments) || this;
  }

  CollapsibleList.prototype.render = function () {
    var _this = this;

    var collapseFrom = this.props.collapseFrom;
    var childrenLength = $d4c2d15876271371a57d18fa8c42edb8$import$React.Children.count(this.props.children);

    var _a = this.partitionChildren(),
        visibleChildren = _a[0],
        collapsedChildren = _a[1];

    var visibleItems = visibleChildren.map(function (child, index) {
      var absoluteIndex = collapseFrom === $d4c2d15876271371a57d18fa8c42edb8$import$Boundary.START ? childrenLength - 1 - index : index;
      return $d4c2d15876271371a57d18fa8c42edb8$import$React.createElement("li", {
        className: _this.props.visibleItemClassName,
        key: absoluteIndex
      }, _this.props.visibleItemRenderer(child.props, absoluteIndex));
    });

    if (collapseFrom === $d4c2d15876271371a57d18fa8c42edb8$import$Boundary.START) {
      // reverse START list so separators appear before items
      visibleItems.reverse();
    } // construct dropdown menu for collapsed items


    var collapsedPopover;

    if (collapsedChildren.length > 0) {
      var position = collapseFrom === $d4c2d15876271371a57d18fa8c42edb8$import$Boundary.END ? $d4c2d15876271371a57d18fa8c42edb8$import$Position.BOTTOM_RIGHT : $d4c2d15876271371a57d18fa8c42edb8$import$Position.BOTTOM_LEFT;
      collapsedPopover = $d4c2d15876271371a57d18fa8c42edb8$import$React.createElement("li", {
        className: this.props.visibleItemClassName
      }, $d4c2d15876271371a57d18fa8c42edb8$import$React.createElement($d4c2d15876271371a57d18fa8c42edb8$import$Popover, $d4c2d15876271371a57d18fa8c42edb8$import$tslib_1.__assign({
        content: $d4c2d15876271371a57d18fa8c42edb8$import$React.createElement($d4c2d15876271371a57d18fa8c42edb8$import$Menu, null, collapsedChildren),
        position: position
      }, this.props.dropdownProps), this.props.dropdownTarget));
    }

    return $d4c2d15876271371a57d18fa8c42edb8$import$React.createElement("ul", {
      className: $d4c2d15876271371a57d18fa8c42edb8$import$classNames($d4c2d15876271371a57d18fa8c42edb8$import$Classes.COLLAPSIBLE_LIST, this.props.className)
    }, collapseFrom === $d4c2d15876271371a57d18fa8c42edb8$import$Boundary.START ? collapsedPopover : null, visibleItems, collapseFrom === $d4c2d15876271371a57d18fa8c42edb8$import$Boundary.END ? collapsedPopover : null);
  }; // splits the list of children into two arrays: visible and collapsed


  CollapsibleList.prototype.partitionChildren = function () {
    if (this.props.children == null) {
      return [[], []];
    }

    var childrenArray = $d4c2d15876271371a57d18fa8c42edb8$import$React.Children.map(this.props.children, function (child, index) {
      if (!$d4c2d15876271371a57d18fa8c42edb8$import$isElementOfType(child, $d4c2d15876271371a57d18fa8c42edb8$import$MenuItem)) {
        throw new Error($d4c2d15876271371a57d18fa8c42edb8$import$Errors.COLLAPSIBLE_LIST_INVALID_CHILD);
      }

      return $d4c2d15876271371a57d18fa8c42edb8$import$React.cloneElement(child, {
        key: "visible-" + index
      });
    });

    if (this.props.collapseFrom === $d4c2d15876271371a57d18fa8c42edb8$import$Boundary.START) {
      // reverse START list so we can always slice visible items from the front of the list
      childrenArray.reverse();
    }

    var visibleItemCount = this.props.visibleItemCount;
    return [childrenArray.slice(0, visibleItemCount), childrenArray.slice(visibleItemCount)];
  };

  CollapsibleList.displayName = $d4c2d15876271371a57d18fa8c42edb8$import$DISPLAYNAME_PREFIX + ".CollapsibleList";
  CollapsibleList.defaultProps = {
    collapseFrom: $d4c2d15876271371a57d18fa8c42edb8$import$Boundary.START,
    dropdownTarget: null,
    visibleItemCount: 3,
    visibleItemRenderer: null
  };
  return CollapsibleList;
}($d4c2d15876271371a57d18fa8c42edb8$import$React.Component);

$d4c2d15876271371a57d18fa8c42edb8$exports.CollapsibleList = $d4c2d15876271371a57d18fa8c42edb8$export$CollapsibleList;